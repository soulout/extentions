(function(f){"use strict";var c=false;try{throw new Error}catch(t){c=!!t.stack}var e=Object.prototype.toString;var r=f.WindowUtil.Function.prototype.toString;var o=/^\[object .+?Constructor\]$/;var i=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function s(t){var n=typeof t;return n=="function"?i.test(r.call(t)):t&&n=="object"&&o.test(e.call(t))||false}var u=D();var a;var n=function(){};var p=function(){var e={task:void 0,next:null};var n=e;var r=false;var o=void 0;var i=false;function u(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var n=e.domain;if(n){e.domain=void 0;n.enter()}try{t()}catch(t){if(i){if(n){n.exit()}f.WindowUtil.setTimeout(u,0);if(n){n.enter()}throw t}else{setTimeout(function(){throw t},0)}}if(n){n.exit()}}r=false}p=function(t){n=n.next={task:t,domain:i&&process.domain,next:null};if(!r){r=true;o()}};if(typeof process!=="undefined"&&process.nextTick){i=true;o=function(){process.nextTick(u)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"&&s(setImmediate.bind)){o=setImmediate.bind(window,u)}else{o=function(){setImmediate(u)}}}else if(typeof MessageChannel!=="undefined"){var t=new MessageChannel;t.port1.onmessage=function(){o=c;t.port1.onmessage=u;u()};var c=function(){t.port2.postMessage(0)};o=function(){f.WindowUtil.setTimeout(u,0);c()}}else{o=function(){f.WindowUtil.setTimeout(u,0)}}return p}();var l=f.WindowUtil.Function.call;function t(t){return function(){return l.apply(t,arguments)}}var d=t(Array.prototype.slice);var v=t(function(t,n){var e=0,r=this.length;if(arguments.length===1){do{if(e in this){n=this[e++];break}if(++e>=r){throw new TypeError}}while(1)}for(;e<r;e++){if(e in this){n=t(n,this[e],e)}}return n});var h=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++){if(this[n]===t){return n}}return-1});var y=t(Array.prototype.map||function(r,o){var i=this;var u=[];v(i,function(t,n,e){u.push(r.call(o,n,e,i))},void 0);return u});var m=s(Object.create)?Object.create:function(t){function n(){}n.prototype=t;return new n};var w=t(Object.prototype.hasOwnProperty);var j=Object.keys||function(t){var n=[];for(var e in t){if(w(t,e)){n.push(e)}}return n};var k=t(Object.prototype.toString);function g(t){return t===Object(t)}function b(t){return k(t)==="[object StopIteration]"||t instanceof x}var x;if(typeof ReturnValue!=="undefined"){x=ReturnValue}else{x=function(t){this.value=t}}var R=false;var O="From previous event:";function T(t,n){if(c&&n.stack&&typeof t==="object"&&t!==null&&t.stack&&t.stack.indexOf(O)===-1){var e=[];for(var r=n;!!r;r=r.source){if(r.stack){e.unshift(r.stack)}}e.unshift(t.stack);var o=e.join("\n"+O+"\n");t.stack=S(o)}}function S(t){var n=t.split("\n");var e=[];for(var r=0;r<n.length;++r){var o=n[r];if(!U(o)&&!N(o)&&o){e.push(o)}}return e.join("\n")}function N(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function E(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n){return[n[1],Number(n[2])]}var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e){return[e[1],Number(e[2])]}var r=/.*@(.+):(\d+)$/.exec(t);if(r){return[r[1],Number(r[2])]}}function U(t){var n=E(t);if(!n){return false}var e=n[0];var r=n[1];return e===a&&r>=u&&r<=ht}function D(){if(!c){return}try{throw new Error}catch(t){var n=t.stack.split("\n");var e=n[0].indexOf("@")>0?n[1]:n[2];var r=E(e);if(!r){return}a=r[0];return r[1]}}function P(t,n,e){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack)}return t.apply(t,arguments)}}function $(t){if(B(t)){return t}if(Q(t)){return et(t)}else{return nt(t)}}$.resolve=$;$.nextTick=p;$.longStackSupport=false;$.defer=C;function C(){var o=[],i=[],u;var t=m(C.prototype);var n=m(W.prototype);n.promiseDispatch=function(t,n,e){var r=d(arguments);if(o){o.push(r);if(n==="when"&&e[1]){i.push(e[1])}}else{p(function(){u.promiseDispatch.apply(u,r)})}};n.valueOf=P(function(){if(o){return n}var t=M(u);if(B(t)){u=t}return t},"valueOf","inspect");n.inspect=function(){if(!u){return{state:"pending"}}return u.inspect()};if($.longStackSupport&&c){try{throw new Error}catch(t){n.stack=t.stack.substring(t.stack.indexOf("\n")+1)}}function e(e){u=e;n.source=e;v(o,function(t,n){p(function(){e.promiseDispatch.apply(e,n)})},void 0);o=void 0;i=void 0}t.promise=n;t.resolve=function(t){if(u){return}e($(t))};t.fulfill=function(t){if(u){return}e(nt(t))};t.reject=function(t){if(u){return}e(tt(t))};t.notify=function(e){if(u){return}v(i,function(t,n){p(function(){n(e)})},void 0)};return t}C.prototype.makeNodeResolver=function(){var e=this;return function(t,n){if(t){e.reject(t)}else if(arguments.length>2){e.resolve(d(arguments,1))}else{e.resolve(n)}}};$.promise=F;function F(t){if(typeof t!=="function"){throw new TypeError("resolver must be a function.")}var n=C();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}$.passByCopy=function(t){return t};W.prototype.passByCopy=function(){return this};$.join=function(t,n){return $(t).join(n)};W.prototype.join=function(t){return $([this,t]).spread(function(t,n){if(t===n){return t}else{throw new Error("Can't join: not the same: "+t+" "+n)}})};$.race=I;function I(o){return F(function(t,n){for(var e=0,r=o.length;e<r;e++){$(o[e]).then(t,n)}})}W.prototype.race=function(){return this.then($.race)};$.makePromise=W;function W(o,i,n){if(i===void 0){i=function(t){return tt(new Error("Promise does not support operation: "+t))}}if(n===void 0){n=function(){return{state:"unknown"}}}var u=m(W.prototype);u.promiseDispatch=function(t,n,e){var r;try{if(o[n]){r=o[n].apply(u,e)}else{r=i.call(u,n,e)}}catch(t){r=tt(t)}if(t){t(r)}};u.inspect=n;if(n){var t=n();if(t.state==="rejected"){u.exception=t.reason}u.valueOf=P(function(){var t=n();if(t.state==="pending"||t.state==="rejected"){return u}return t.value})}return u}W.prototype.toString=function(){return"[object Promise]"};W.prototype.then=function(n,e,r){var o=this;var i=C();var u=false;function c(t){try{return typeof n==="function"?n(t):t}catch(t){return tt(t)}}function f(t){if(typeof e==="function"){T(t,o);try{return e(t)}catch(t){return tt(t)}}return tt(t)}function s(t){return typeof r==="function"?r(t):t}p(function(){o.promiseDispatch(function(t){if(u){return}u=true;i.resolve(c(t))},"when",[function(t){if(u){return}u=true;i.resolve(f(t))}])});o.promiseDispatch(void 0,"when",[void 0,function(t){var n;var e=false;try{n=s(t)}catch(t){e=true;if($.onerror){$.onerror(t)}else{throw t}}if(!e){i.notify(n)}}]);return i.promise};$.when=A;function A(t,n,e,r){return $(t).then(n,e,r)}W.prototype.thenResolve=function(t){return this.then(function(){return t})};$.thenResolve=function(t,n){return $(t).thenResolve(n)};W.prototype.thenReject=function(t){return this.then(function(){throw t})};$.thenReject=function(t,n){return $(t).thenReject(n)};$.nearer=M;function M(t){if(B(t)){var n=t.inspect();if(n.state==="fulfilled"){return n.value}}return t}$.isPromise=B;function B(t){return g(t)&&typeof t.promiseDispatch==="function"&&typeof t.inspect==="function"}$.isPromiseAlike=Q;function Q(t){return g(t)&&typeof t.then==="function"}$.isPending=V;function V(t){return B(t)&&t.inspect().state==="pending"}W.prototype.isPending=function(){return this.inspect().state==="pending"};$.isFulfilled=L;function L(t){return!B(t)||t.inspect().state==="fulfilled"}W.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};$.isRejected=q;function q(t){return B(t)&&t.inspect().state==="rejected"}W.prototype.isRejected=function(){return this.inspect().state==="rejected"};var z=[];var G=[];var H=false;var J=true;function K(){if(!H&&typeof window!=="undefined"&&!window.Touch&&window.console){console.warn("[Q] Unhandled rejection reasons (should be empty):",z)}H=true}function X(){for(var t=0;t<z.length;t++){var n=z[t];console.warn("Unhandled rejection reason:",n)}}function Y(){z.length=0;G.length=0;H=false;if(!J){J=true;if(typeof process!=="undefined"&&process.on){process.on("exit",X)}}}function Z(t,n){if(!J){return}G.push(t);if(n&&typeof n.stack!=="undefined"){z.push(n.stack)}else{z.push("(no stack) "+n)}K()}function _(t){if(!J){return}var n=h(G,t);if(n!==-1){G.splice(n,1);z.splice(n,1)}}$.resetUnhandledRejections=Y;$.getUnhandledReasons=function(){return z.slice()};$.stopUnhandledRejectionTracking=function(){Y();if(typeof process!=="undefined"&&process.on){process.removeListener("exit",X)}J=false};Y();$.reject=tt;function tt(n){var t=W({when:function(t){if(t){_(this)}return t?t(n):this}},function t(){return this},function t(){return{state:"rejected",reason:n}});Z(t,n);return t}$.fulfill=nt;function nt(e){return W({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){if(t===null||t===void 0){return e.apply(void 0,n)}else{return e[t].apply(e,n)}},apply:function(t,n){return e.apply(t,n)},keys:function(){return j(e)}},void 0,function t(){return{state:"fulfilled",value:e}})}function et(t){var n=C();p(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}});return n.promise}$.master=rt;function rt(r){return W({isDef:function(){}},function t(n,e){return st(r,n,e)},function(){return $(r).inspect()})}$.spread=ot;function ot(t,n,e){return $(t).spread(n,e)}W.prototype.spread=function(n,t){return this.all().then(function(t){return n.apply(void 0,t)},t)};$.async=it;function it(n){return function(){function t(t,n){var e;if(R){try{e=r[t](n)}catch(t){return tt(t)}if(e.done){return e.value}else{return A(e.value,o,i)}}else{try{e=r[t](n)}catch(t){if(b(t)){return t.value}else{return tt(t)}}return A(e,o,i)}}var r=n.apply(this,arguments);var o=t.bind(t,"next");var i=t.bind(t,"throw");return o()}}$.spawn=ut;function ut(t){$.done($.async(t)())}$["return"]=ct;function ct(t){throw new x(t)}$.promised=ft;function ft(e){return function(){return ot([this,at(arguments)],function(t,n){return e.apply(t,n)})}}$.dispatch=st;function st(t,n,e){return $(t).dispatch(n,e)}W.prototype.dispatch=function(t,n){var e=this;var r=C();p(function(){e.promiseDispatch(r.resolve,t,n)});return r.promise};$.get=function(t,n){return $(t).dispatch("get",[n])};W.prototype.get=function(t){return this.dispatch("get",[t])};$.set=function(t,n,e){return $(t).dispatch("set",[n,e])};W.prototype.set=function(t,n){return this.dispatch("set",[t,n])};$.del=$["delete"]=function(t,n){return $(t).dispatch("delete",[n])};W.prototype.del=W.prototype["delete"]=function(t){return this.dispatch("delete",[t])};$.mapply=$.post=function(t,n,e){return $(t).dispatch("post",[n,e])};W.prototype.mapply=W.prototype.post=function(t,n){return this.dispatch("post",[t,n])};$.send=$.mcall=$.invoke=function(t,n){return $(t).dispatch("post",[n,d(arguments,2)])};W.prototype.send=W.prototype.mcall=W.prototype.invoke=function(t){return this.dispatch("post",[t,d(arguments,1)])};$.fapply=function(t,n){return $(t).dispatch("apply",[void 0,n])};W.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])};$["try"]=$.fcall=function(t){return $(t).dispatch("apply",[void 0,d(arguments,1)])};W.prototype.fcall=function(){return this.dispatch("apply",[void 0,d(arguments)])};$.fbind=function(t){var n=$(t);var e=d(arguments,1);return function t(){return n.dispatch("apply",[this,e.concat(d(arguments))])}};W.prototype.fbind=function(){var n=this;var e=d(arguments);return function t(){return n.dispatch("apply",[this,e.concat(d(arguments))])}};$.keys=function(t){return $(t).dispatch("keys",[])};W.prototype.keys=function(){return this.dispatch("keys",[])};$.all=at;function at(t){return A(t,function(o){var i=0;var u=C();v(o,function(t,n,e){var r;if(B(n)&&(r=n.inspect()).state==="fulfilled"){o[e]=r.value}else{++i;A(n,function(t){o[e]=t;if(--i===0){u.resolve(o)}},u.reject,function(t){u.notify({index:e,value:t})})}},void 0);if(i===0){u.resolve(o)}return u.promise})}W.prototype.all=function(){return at(this)};$.allResolved=P(pt,"allResolved","allSettled");function pt(t){return A(t,function(t){t=y(t,$);return A(at(y(t,function(t){return A(t,n,n)})),function(){return t})})}W.prototype.allResolved=function(){return pt(this)};$.allSettled=lt;function lt(t){return $(t).allSettled()}W.prototype.allSettled=function(){return this.then(function(t){return at(y(t,function(t){t=$(t);function n(){return t.inspect()}return t.then(n,n)}))})};$.fail=$["catch"]=function(t,n){return $(t).then(void 0,n)};W.prototype.fail=W.prototype["catch"]=function(t){return this.then(void 0,t)};$.progress=dt;function dt(t,n){return $(t).then(void 0,void 0,n)}W.prototype.progress=function(t){return this.then(void 0,void 0,t)};$.fin=$["finally"]=function(t,n){return $(t)["finally"](n)};W.prototype.fin=W.prototype["finally"]=function(n){n=$(n);return this.then(function(t){return n.fcall().then(function(){return t})},function(t){return n.fcall().then(function(){throw t})})};$.done=function(t,n,e,r){return $(t).done(n,e,r)};W.prototype.done=function(t,n,e){var r=function(t){p(function(){T(t,o);if($.onerror){$.onerror(t)}else{throw t}})};var o=t||n||e?this.then(t,n,e):this;if(typeof process==="object"&&process&&process.domain){r=process.domain.bind(r)}o.then(void 0,r)};$.timeout=function(t,n,e){return $(t).timeout(n,e)};W.prototype.timeout=function(t,n){var e=C();var r=setTimeout(function(){e.reject(new Error(n||"Timed out after "+t+" ms"))},t);this.then(function(t){clearTimeout(r);e.resolve(t)},function(t){clearTimeout(r);e.reject(t)},e.notify);return e.promise};$.delay=function(t,n){if(n===void 0){n=t;t=void 0}return $(t).delay(n)};W.prototype.delay=function(e){return this.then(function(t){var n=C();setTimeout(function(){n.resolve(t)},e);return n.promise})};$.nfapply=function(t,n){return $(t).nfapply(n)};W.prototype.nfapply=function(t){var n=C();var e=d(t);e.push(n.makeNodeResolver());this.fapply(e).fail(n.reject);return n.promise};$.nfcall=function(t){var n=d(arguments,1);return $(t).nfapply(n)};W.prototype.nfcall=function(){var t=d(arguments);var n=C();t.push(n.makeNodeResolver());this.fapply(t).fail(n.reject);return n.promise};$.nfbind=$.denodeify=function(e){var r=d(arguments,1);return function(){var t=r.concat(d(arguments));var n=C();t.push(n.makeNodeResolver());$(e).fapply(t).fail(n.reject);return n.promise}};W.prototype.nfbind=W.prototype.denodeify=function(){var t=d(arguments);t.unshift(this);return $.denodeify.apply(void 0,t)};$.nbind=function(r,o){var i=d(arguments,2);return function(){var t=i.concat(d(arguments));var n=C();t.push(n.makeNodeResolver());function e(){return r.apply(o,arguments)}$(e).fapply(t).fail(n.reject);return n.promise}};W.prototype.nbind=function(){var t=d(arguments,0);t.unshift(this);return $.nbind.apply(void 0,t)};$.nmapply=$.npost=function(t,n,e){return $(t).npost(n,e)};W.prototype.nmapply=W.prototype.npost=function(t,n){var e=d(n||[]);var r=C();e.push(r.makeNodeResolver());this.dispatch("post",[t,e]).fail(r.reject);return r.promise};$.nsend=$.nmcall=$.ninvoke=function(t,n){var e=d(arguments,2);var r=C();e.push(r.makeNodeResolver());$(t).dispatch("post",[n,e]).fail(r.reject);return r.promise};W.prototype.nsend=W.prototype.nmcall=W.prototype.ninvoke=function(t){var n=d(arguments,1);var e=C();n.push(e.makeNodeResolver());this.dispatch("post",[t,n]).fail(e.reject);return e.promise};$.nodeify=vt;function vt(t,n){return $(t).nodeify(n)}W.prototype.nodeify=function(n){if(n){this.then(function(t){p(function(){n(null,t)})},function(t){p(function(){n(t)})})}else{return this}};f.Q=$;var ht=D()})(Okta);